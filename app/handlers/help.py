from aiogram import Router, F
from aiogram.types import Message, CallbackQuery
from aiogram.filters import Command
from sqlalchemy.ext.asyncio import AsyncSession

from app.keyboards.inline import back_keyboard, main_menu_keyboard
from app.utils.db import get_session

router = Router()


@router.message(Command("help"))
async def command_help(message: Message):
    """
    –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /help
    """
    text = (
        "<b>‚ùì –ü–æ–º–æ—â—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞</b>\n\n"
        "–ü—Ä–∏–≤–µ—Ç! –Ø FitGains Bot ‚Äî —Ç–≤–æ–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –ø–æ –Ω–∞–±–æ—Ä—É –º—ã—à–µ—á–Ω–æ–π –º–∞—Å—Å—ã! "
        "–í–æ—Ç —á—Ç–æ —è —É–º–µ—é:\n\n"
        "üìù <b>–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:</b>\n"
        "/start ‚Äî –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º\n"
        "/help ‚Äî –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É\n"
        "/profile ‚Äî –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–º\n"
        "/workout ‚Äî –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞–º–∏\n"
        "/nutrition ‚Äî –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∏—Ç–∞–Ω–∏–µ–º\n"
        "/progress ‚Äî –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞\n\n"
        "‚ùì <b>–ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã:</b>\n"
        "‚Ä¢ –ö–∞–∫ –∏–∑–º–µ–Ω–∏—Ç—å —Å–≤–æ–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã? ‚Äî –í —Ä–∞–∑–¥–µ–ª–µ ¬´–ü—Ä–æ—Ñ–∏–ª—å¬ª\n"
        "‚Ä¢ –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫? ‚Äî –í —Ä–∞–∑–¥–µ–ª–µ ¬´–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏¬ª\n"
        "‚Ä¢ –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –ø–ª–∞–Ω –ø–∏—Ç–∞–Ω–∏—è? ‚Äî –í —Ä–∞–∑–¥–µ–ª–µ ¬´–ü–∏—Ç–∞–Ω–∏–µ¬ª\n"
        "‚Ä¢ –ö–∞–∫ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å? ‚Äî –í —Ä–∞–∑–¥–µ–ª–µ ¬´–ü—Ä–æ–≥—Ä–µ—Å—Å¬ª\n\n"
        "‚öôÔ∏è <b>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:</b>\n"
        "–î–ª—è —Å–≤—è–∑–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∏—Å–ø–æ–ª—å–∑—É–π –∫–æ–º–∞–Ω–¥—É /support"
    )
    
    # –°–æ–∑–¥–∞–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
    builder = InlineKeyboardBuilder()
    builder.row(InlineKeyboardButton(text="üìö FAQ", callback_data="show_faq"))
    builder.row(InlineKeyboardButton(text="üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞", callback_data="support"))
    builder.row(InlineKeyboardButton(text="üîô –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", callback_data="main_menu"))
    
    await message.answer(text, reply_markup=builder.as_markup())


@router.callback_query(F.data == "help")
async def process_help(callback: CallbackQuery):
    """
    –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–ü–æ–º–æ—â—å"
    """
    text = (
        "<b>‚ùì –ü–æ–º–æ—â—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞</b>\n\n"
        "–ü—Ä–∏–≤–µ—Ç! –Ø FitGains Bot ‚Äî —Ç–≤–æ–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –ø–æ –Ω–∞–±–æ—Ä—É –º—ã—à–µ—á–Ω–æ–π –º–∞—Å—Å—ã! "
        "–í–æ—Ç —á—Ç–æ —è —É–º–µ—é:\n\n"
        "üìù <b>–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:</b>\n"
        "/start ‚Äî –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º\n"
        "/help ‚Äî –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É\n"
        "/profile ‚Äî –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–º\n"
        "/workout ‚Äî –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞–º–∏\n"
        "/nutrition ‚Äî –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∏—Ç–∞–Ω–∏–µ–º\n"
        "/progress ‚Äî –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞\n\n"
        "‚ùì <b>–ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã:</b>\n"
        "‚Ä¢ –ö–∞–∫ –∏–∑–º–µ–Ω–∏—Ç—å —Å–≤–æ–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã? ‚Äî –í —Ä–∞–∑–¥–µ–ª–µ ¬´–ü—Ä–æ—Ñ–∏–ª—å¬ª\n"
        "‚Ä¢ –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫? ‚Äî –í —Ä–∞–∑–¥–µ–ª–µ ¬´–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏¬ª\n"
        "‚Ä¢ –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –ø–ª–∞–Ω –ø–∏—Ç–∞–Ω–∏—è? ‚Äî –í —Ä–∞–∑–¥–µ–ª–µ ¬´–ü–∏—Ç–∞–Ω–∏–µ¬ª\n"
        "‚Ä¢ –ö–∞–∫ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å? ‚Äî –í —Ä–∞–∑–¥–µ–ª–µ ¬´–ü—Ä–æ–≥—Ä–µ—Å—Å¬ª\n\n"
        "‚öôÔ∏è <b>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:</b>\n"
        "–î–ª—è —Å–≤—è–∑–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∏—Å–ø–æ–ª—å–∑—É–π –∫–æ–º–∞–Ω–¥—É /support"
    )
    
    # –°–æ–∑–¥–∞–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
    builder = InlineKeyboardBuilder()
    builder.row(InlineKeyboardButton(text="üìö FAQ", callback_data="show_faq"))
    builder.row(InlineKeyboardButton(text="üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞", callback_data="support"))
    builder.row(InlineKeyboardButton(text="üîô –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", callback_data="main_menu"))
    
    await callback.message.edit_text(text, reply_markup=builder.as_markup())
    await callback.answer()


@router.callback_query(F.data == "show_faq")
async def process_show_faq(callback: CallbackQuery):
    """
    –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "FAQ"
    """
    text = (
        "<b>üìö –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã</b>\n\n"
        "<b>1. –ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å?</b>\n"
        "–ü–µ—Ä–µ–π–¥–∏ –≤ —Ä–∞–∑–¥–µ–ª ¬´–ü—Ä–æ—Ñ–∏–ª—å¬ª, –Ω–∞–∂–º–∏ –Ω–∞ ¬´–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ¬ª –∏ –∑–∞–ø–æ–ª–Ω–∏ –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã.\n\n"
        "<b>2. –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫?</b>\n"
        "–ü–µ—Ä–µ–π–¥–∏ –≤ —Ä–∞–∑–¥–µ–ª ¬´–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏¬ª, –≤—ã–±–µ—Ä–∏ ¬´–ù–æ–≤–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞¬ª –∏ —Å–ª–µ–¥—É–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º.\n\n"
        "<b>3. –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –ø–ª–∞–Ω –ø–∏—Ç–∞–Ω–∏—è?</b>\n"
        "–ü–µ—Ä–µ–π–¥–∏ –≤ —Ä–∞–∑–¥–µ–ª ¬´–ü–∏—Ç–∞–Ω–∏–µ¬ª, –≤—ã–±–µ—Ä–∏ ¬´–û–±–Ω–æ–≤–∏—Ç—å –ø–ª–∞–Ω¬ª –∏ —Å–æ–∑–¥–∞–π –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–ª–∞–Ω.\n\n"
        "<b>4. –ö–∞–∫ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å?</b>\n"
        "–†–µ–≥—É–ª—è—Ä–Ω–æ –∑–∞—Ö–æ–¥–∏ –≤ —Ä–∞–∑–¥–µ–ª ¬´–ü—Ä–æ–≥—Ä–µ—Å—Å¬ª –∏ –≤–Ω–æ—Å–∏ —Å–≤–æ–∏ —Ç–µ–∫—É—â–∏–µ –∑–∞–º–µ—Ä—ã.\n\n"
        "<b>5. –ü–æ—á–µ–º—É —è –Ω–µ –Ω–∞–±–∏—Ä–∞—é –≤–µ—Å?</b>\n"
        "–í–æ–∑–º–æ–∂–Ω–æ, —Ç—ã –Ω–µ –ø–æ—Ç—Ä–µ–±–ª—è–µ—à—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫–∞–ª–æ—Ä–∏–π. –£–±–µ–¥–∏—Å—å, —á—Ç–æ —Ç—ã –≤ –ø—Ä–æ—Ñ–∏—Ü–∏—Ç–µ –∫–∞–ª–æ—Ä–∏–π.\n\n"
        "<b>6. –ü–æ—á–µ–º—É —è –Ω–∞–±–∏—Ä–∞—é —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∂–∏—Ä–∞?</b>\n"
        "–í–æ–∑–º–æ–∂–Ω–æ, —Ç–≤–æ–π –ø—Ä–æ—Ñ–∏—Ü–∏—Ç –∫–∞–ª–æ—Ä–∏–π —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫.\n\n"
        "<b>7. –ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è?</b>\n"
        "–ö –∫–∞–∂–¥–æ–º—É —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—é –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –∏ –≤–∏–¥–µ–æ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ).\n\n"
        "<b>8. –ß—Ç–æ —Ç–∞–∫–æ–µ –º–∞–∫—Ä–æ–Ω—É—Ç—Ä–∏–µ–Ω—Ç—ã?</b>\n"
        "–≠—Ç–æ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–∏—Ç–∞—Ç–µ–ª—å–Ω—ã–µ –≤–µ—â–µ—Å—Ç–≤–∞: –±–µ–ª–∫–∏, –∂–∏—Ä—ã –∏ —É–≥–ª–µ–≤–æ–¥—ã.\n\n"
        "<b>9. –°–∫–æ–ª—å–∫–æ –±–µ–ª–∫–∞ –º–Ω–µ –Ω—É–∂–Ω–æ?</b>\n"
        "–î–ª—è –Ω–∞–±–æ—Ä–∞ –º—ã—à–µ—á–Ω–æ–π –º–∞—Å—Å—ã —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 1.6-2.2 –≥ –±–µ–ª–∫–∞ –Ω–∞ –∫–≥ –≤–µ—Å–∞ —Ç–µ–ª–∞.\n\n"
        "<b>10. –ó–∞—á–µ–º –Ω—É–∂–Ω—ã –∫–∞—Ä–¥–∏–æ—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –ø—Ä–∏ –Ω–∞–±–æ—Ä–µ –º–∞—Å—Å—ã?</b>\n"
        "–û–Ω–∏ —É–ª—É—á—à–∞—é—Ç —Ä–∞–±–æ—Ç—É —Å–µ—Ä–¥–µ—á–Ω–æ-—Å–æ—Å—É–¥–∏—Å—Ç–æ–π —Å–∏—Å—Ç–µ–º—ã –∏ –ø–æ–º–æ–≥–∞—é—Ç –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –∂–∏—Ä–æ–≤—ã–µ –æ—Ç–ª–æ–∂–µ–Ω–∏—è."
    )
    
    # –°–æ–∑–¥–∞–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
    builder = InlineKeyboardBuilder()
    builder.row(InlineKeyboardButton(text="üîô –ù–∞–∑–∞–¥", callback_data="help"))
    
    await callback.message.edit_text(text, reply_markup=builder.as_markup())
    await callback.answer()


@router.callback_query(F.data == "support")
async def process_support(callback: CallbackQuery):
    """
    –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–ü–æ–¥–¥–µ—Ä–∂–∫–∞"
    """
    text = (
        "<b>üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞</b>\n\n"
        "–ï—Å–ª–∏ —É —Ç–µ–±—è –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã, —Ç—ã –º–æ–∂–µ—à—å —Å–≤—è–∑–∞—Ç—å—Å—è —Å –Ω–∞—à–µ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π:\n\n"
        "1. –ù–∞–ø–∏—à–∏ —Å–≤–æ–π –≤–æ–ø—Ä–æ—Å –ø—Ä—è–º–æ —Å—é–¥–∞, –∏ –º—ã –æ—Ç–≤–µ—Ç–∏–º –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.\n\n"
        "2. –ò–ª–∏ –Ω–∞–ø–∏—à–∏ –Ω–∞ email: support@fitgains.com\n\n"
        "3. –¢–∞–∫–∂–µ —Ç—ã –º–æ–∂–µ—à—å –ø–æ—Å–µ—Ç–∏—Ç—å –Ω–∞—à —Å–∞–π—Ç: fitgains.com\n\n"
        "–ú—ã –æ–±—ã—á–Ω–æ –æ—Ç–≤–µ—á–∞–µ–º –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤."
    )
    
    # –°–æ–∑–¥–∞–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
    builder = InlineKeyboardBuilder()
    builder.row(InlineKeyboardButton(text="üîô –ù–∞–∑–∞–¥", callback_data="help"))
    
    await callback.message.edit_text(text, reply_markup=builder.as_markup())
    await callback.answer()


@router.message(Command("support"))
async def command_support(message: Message):
    """
    –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /support
    """
    text = (
        "<b>üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞</b>\n\n"
        "–ï—Å–ª–∏ —É —Ç–µ–±—è –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã, —Ç—ã –º–æ–∂–µ—à—å —Å–≤—è–∑–∞—Ç—å—Å—è —Å –Ω–∞—à–µ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π:\n\n"
        "1. –ù–∞–ø–∏—à–∏ —Å–≤–æ–π –≤–æ–ø—Ä–æ—Å –ø—Ä—è–º–æ —Å—é–¥–∞, –∏ –º—ã –æ—Ç–≤–µ—Ç–∏–º –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.\n\n"
        "2. –ò–ª–∏ –Ω–∞–ø–∏—à–∏ –Ω–∞ email: support@fitgains.com\n\n"
        "3. –¢–∞–∫–∂–µ —Ç—ã –º–æ–∂–µ—à—å –ø–æ—Å–µ—Ç–∏—Ç—å –Ω–∞—à —Å–∞–π—Ç: fitgains.com\n\n"
        "–ú—ã –æ–±—ã—á–Ω–æ –æ—Ç–≤–µ—á–∞–µ–º –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤."
    )
    
    # –°–æ–∑–¥–∞–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
    builder = InlineKeyboardBuilder()
    builder.row(InlineKeyboardButton(text="üîô –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", callback_data="main_menu"))
    
    await message.answer(text, reply_markup=builder.as_markup())


from aiogram.utils.keyboard import InlineKeyboardBuilder
from aiogram.types import InlineKeyboardButton
